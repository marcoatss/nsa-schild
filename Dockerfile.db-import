FROM python:3.11-slim

# Install PostgreSQL client
RUN apt-get update && \
    apt-get install -y postgresql-client && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Install Python dependencies
RUN pip install --no-cache-dir pandas pyarrow psycopg2-binary

# Copy scripts from scripts folder
COPY scripts/import-db.py .
COPY scripts/reset-admin.py .

# Database export will be mounted as volume
# Usage: docker-compose run --rm db-import

CMD ["python3", "import-db.py"]

